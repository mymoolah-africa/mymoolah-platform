# MyMoolah Treasury Platform - Environment Configuration Template
# Copy this file to .env and configure your environment variables

# =============================================================================
# CORE APPLICATION CONFIGURATION
# =============================================================================

# Application Environment
NODE_ENV=development
PORT=3001

# =============================================================================
# TLS 1.3 CONFIGURATION (BANKING-GRADE SECURITY)
# =============================================================================

# TLS Configuration
TLS_ENABLED=true
SSL_CERT_PATH=./certs/certificate.pem
SSL_KEY_PATH=./certs/private-key.pem

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Database
DB_HOST=localhost
DB_PORT=5432
DB_NAME=mymoolah_dev
DB_USER=mymoolah_user
DB_PASSWORD=secure_password

# Database SSL (Production Only)
DB_SSL_CA=
DB_SSL_CERT=
DB_SSL_KEY=

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# JWT Configuration
JWT_SECRET=your_super_secure_jwt_secret_key_at_least_32_characters_long
JWT_EXPIRES_IN=24h

# Session Configuration
SESSION_SECRET=your_session_secret_key_at_least_32_characters_long

# =============================================================================
# EXTERNAL SERVICE INTEGRATIONS
# =============================================================================

# Flash Integration
FLASH_API_KEY=your_flash_api_key
FLASH_API_ENDPOINT=https://api.flash.co.za
FLASH_CONSUMER_KEY=your_flash_consumer_key
FLASH_CONSUMER_SECRET=your_flash_consumer_secret

# MobileMart Integration (Fulcrum API)
# UAT Environment: https://uat.fulcrumswitch.com
# PROD Environment: https://fulcrumswitch.com
# NOTE: PROD credentials verified working by MobileMart (2025-11-10)
# UAT credentials: Request via WhatsApp (provide cellphone number)
MOBILEMART_LIVE_INTEGRATION=false
# PROD Credentials (verified working)
MOBILEMART_CLIENT_ID=mymoolah
MOBILEMART_CLIENT_SECRET=c799bf37-934d-4dcf-bfec-42fb421a6407
# UAT Credentials (to be provided via WhatsApp)
# MOBILEMART_CLIENT_ID=mymoolah
# MOBILEMART_CLIENT_SECRET=<UAT_SECRET_FROM_WHATSAPP>
MOBILEMART_API_URL=https://uat.fulcrumswitch.com
MOBILEMART_TOKEN_URL=https://uat.fulcrumswitch.com/connect/token
MOBILEMART_SCOPE=api
# Legacy variables (deprecated, kept for backward compatibility)
MOBILEMART_API_KEY=your_mobilemart_api_key
MOBILEMART_API_ENDPOINT=https://api.mobilemart.co.za

# dtMercury Integration
DTMERCURY_API_KEY=your_dtmercury_api_key
DTMERCURY_API_ENDPOINT=https://api.dtmercury.co.za

# Peach Payments Integration
PEACH_API_KEY=your_peach_api_key
PEACH_API_ENDPOINT=https://api.peachpayments.com

# Zapper Integration (QR Code Payments)
# Test Credentials (from Postman collection - tested with 2 test QR codes)
# NOTE: These are TEST credentials. Production credentials will be provided separately.
ZAPPER_API_URL=https://api.zapper.com/v1
ZAPPER_ORG_ID=810c1540-6de0-11f0-9286-4f0cdcb898f5
ZAPPER_API_TOKEN=eb22884a-bc62-4307-ac21-ac9f2ac140f2
ZAPPER_X_API_KEY=8h8DDBvlaPoYgefHwqeG3DNZaO6vorxWPsCDtvd0

# =============================================================================
# CORS CONFIGURATION
# =============================================================================

# Allowed Origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis Cache
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log Level
LOG_LEVEL=debug

# =============================================================================
# FEATURE TOGGLES
# =============================================================================

# Service Enablers
CATALOG_SYNC_ENABLED=true
RECURRING_REQUESTS_ENABLED=true
EASYPAY_EXPIRY_HANDLER_ENABLED=true

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Performance Monitoring
ENABLE_PERFORMANCE_MONITORING=true
ENABLE_DATABASE_MONITORING=true

# =============================================================================
# LEDGER / ACCOUNTING CONFIGURATION
# =============================================================================

# VAT rate applied to commission (inclusive)
VAT_RATE=0.15

# Ledger account codes for VAS commission allocation
LEDGER_ACCOUNT_MM_COMMISSION_CLEARING=
LEDGER_ACCOUNT_COMMISSION_REVENUE=
LEDGER_ACCOUNT_VAT_CONTROL=

# Zapper QR Payment Fee Configuration
# Default fee per transaction (inclusive of 15% VAT)
# Can be overridden per user/wallet in future
ZAPPER_DEFAULT_FEE_INCL_VAT=3.00
ZAPPER_FLOAT_ACCOUNT_NUMBER=ZAPPER_FLOAT_001

# =============================================================================
# PRODUCTION SETTINGS
# =============================================================================

# For production, ensure these settings:
# NODE_ENV=production
# TLS_ENABLED=true
# JWT_SECRET=very_long_secure_random_string_at_least_64_characters
# SESSION_SECRET=very_long_secure_random_string_at_least_64_characters
# LOG_LEVEL=warn
# CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# =============================================================================
# SECURITY NOTES
# =============================================================================

# IMPORTANT SECURITY REQUIREMENTS:
# 1. JWT_SECRET must be at least 32 characters long
# 2. SESSION_SECRET must be at least 32 characters long
# 3. TLS_ENABLED=true for production environments
# 4. Use strong, unique passwords for all services
# 5. Keep API keys secure and rotate regularly
# 6. Use HTTPS in production with valid SSL certificates
# 7. Configure proper CORS origins for production
# 8. Enable all security headers and rate limiting
# 9. Use environment-specific configurations
# 10. Never commit .env files to version control

# =============================================================================
# MOJALOOP COMPLIANCE NOTES
# =============================================================================

# TLS 1.3 Configuration for Mojaloop FSPIOP Compliance:
# - TLS_ENABLED=true (required)
# - Strong cipher suites configured automatically
# - Perfect Forward Secrecy enabled
# - OCSP Stapling enabled
# - Certificate transparency enabled
# - Security headers configured for banking-grade compliance
# - Rate limiting configured for financial transactions
# - Input validation and sanitization enabled
# - Audit logging enabled
# - Error handling with security considerations

# =============================================================================
# BANKING-GRADE SECURITY FEATURES
# =============================================================================

# Automatic Security Features:
# - TLS 1.3 enforcement
# - AES-256-GCM encryption
# - ChaCha20-Poly1305 cipher support
# - Perfect Forward Secrecy
# - Certificate pinning (production)
# - Security headers (HSTS, CSP, X-Frame-Options, etc.)
# - Rate limiting for financial transactions
# - Input validation and sanitization
# - SQL injection protection
# - XSS protection
# - CSRF protection
# - Audit logging
# - Error handling without information disclosure
# - Session management with secure cookies
# - JWT with HS512 algorithm
# - CORS with strict origin validation 